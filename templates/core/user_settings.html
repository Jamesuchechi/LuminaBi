{% extends 'base.html' %}

{% block title %}App Settings - LuminaBI{% endblock %}

{% block extra_css %}
<style>
    .settings-blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(80px);
        animation: blob 15s infinite;
        opacity: 0.6;
    }
    .settings-blob-1 {
        width: 500px; height: 500px;
        background: radial-gradient(circle, rgba(0, 243, 255, 0.12) 0%, transparent 70%);
        top: 10%; right: 10%;
        animation-delay: 0s;
    }
    .settings-blob-2 {
        width: 400px; height: 400px;
        background: radial-gradient(circle, rgba(189, 0, 255, 0.1) 0%, transparent 70%);
        bottom: 20%; left: 5%;
        animation-delay: 5s;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen relative py-12 px-4 sm:px-6 lg:px-8">
    <!-- Ambient Background -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <div class="settings-blob settings-blob-1"></div>
        <div class="settings-blob settings-blob-2"></div>
    </div>
    
    <div class="max-w-3xl mx-auto relative z-10">
        <!-- Back Link -->
        <div class="mb-8">
            <a href="{% url 'core:index' %}" class="inline-flex items-center gap-2 text-neonBlue hover:text-neonPurple transition group">
                <i class="fas fa-arrow-left group-hover:-translate-x-1 transition"></i>
                <span class="font-mono text-sm">Back to Dashboard</span>
            </a>
        </div>

        <!-- Header -->
        <h1 class="text-5xl font-bold text-white mb-2">App Configuration</h1>
        <p class="text-gray-400 mb-12">Customize your LuminaBI experience with personal preferences</p>

        <!-- Settings Form -->
        <div class="glass-panel rounded-3xl border border-white/10 overflow-hidden">
            <form method="post" class="p-8 md:p-12 space-y-8">
                {% csrf_token %}

                <!-- Theme Setting -->
                <div class="pb-8 border-b border-white/10">
                    <div class="mb-6">
                        <label class="text-lg font-bold text-white flex items-center gap-2 mb-2">
                            <i class="fas fa-palette text-neonBlue text-xl"></i>
                            Theme
                        </label>
                        <p class="text-gray-400 text-sm">Choose your preferred color scheme</p>
                    </div>

                    <div class="space-y-3">
                        {% for value, label in theme_choices %}
                            <label class="flex items-center p-4 rounded-lg border-2 {% if profile.theme == value %}border-neonBlue bg-neonBlue/10{% else %}border-white/10 hover:border-white/20{% endif %} cursor-pointer transition">
                                <input 
                                    type="radio" 
                                    name="theme" 
                                    value="{{ value }}" 
                                    {% if profile.theme == value %}checked{% endif %}
                                    class="w-4 h-4 mr-3"
                                >
                                <div class="flex-1">
                                    <p class="font-semibold text-white">{{ label }}</p>
                                    <p class="text-xs text-gray-400 mt-1">
                                        {% if value == 'light' %}Light mode with high contrast
                                        {% elif value == 'dark' %}Dark mode with neon accents
                                        {% else %}Automatically match system preferences
                                        {% endif %}
                                    </p>
                                </div>
                                <i class="fas fa-check text-neonBlue text-lg {% if profile.theme != value %}hidden{% endif %}"></i>
                            </label>
                        {% endfor %}
                    </div>
                </div>

                <!-- Language Setting -->
                <div class="pb-8 border-b border-white/10">
                    <div class="mb-6">
                        <label class="text-lg font-bold text-white flex items-center gap-2 mb-2">
                            <i class="fas fa-globe text-neonPurple text-xl"></i>
                            Language
                        </label>
                        <p class="text-gray-400 text-sm">Select your preferred language for the interface</p>
                    </div>

                    <select 
                        name="language" 
                        class="w-full px-4 py-3 rounded-lg transition"
                    >
                        {% for value, label in language_choices %}
                            <option value="{{ value }}" {% if profile.language == value %}selected{% endif %}>
                                {{ label }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Timezone Setting -->
                <div class="pb-8">
                    <div class="mb-6">
                        <label class="text-lg font-bold text-white flex items-center gap-2 mb-2">
                            <i class="fas fa-clock text-neonBlue text-xl"></i>
                            Timezone
                        </label>
                        <p class="text-gray-400 text-sm">Set your timezone for accurate time display</p>
                    </div>

                    <select 
                        name="timezone" 
                        class="w-full px-4 py-3 rounded-lg transition"
                    >
                        {% for tz in timezones %}
                            <option value="{{ tz }}" {% if profile.timezone == tz %}selected{% endif %}>
                                {{ tz }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Settings Info Box -->
                <div class="bg-neonBlue/10 border border-neonBlue/30 rounded-2xl p-6">
                    <div class="flex gap-3">
                        <i class="fas fa-info-circle text-neonBlue text-lg mt-1 flex-shrink-0"></i>
                        <div>
                            <p class="text-sm text-gray-300">
                                Your preferences are saved automatically. These settings apply to your account across all devices and sessions.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4 pt-4">
                    <button 
                        type="submit"
                        class="flex-1 bg-gradient-to-r from-neonBlue to-neonPurple hover:from-neonBlue/80 hover:to-neonPurple/80 text-white font-bold py-3 px-6 rounded-2xl transition flex items-center justify-center gap-2"
                    >
                        <i class="fas fa-save"></i>
                        Save Settings
                    </button>
                    <a 
                        href="{% url 'core:index' %}"
                        class="flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-2xl transition border border-white/20 flex items-center justify-center gap-2"
                    >
                        <i class="fas fa-times"></i>
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
